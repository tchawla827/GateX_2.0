{% extends "base.html" %}

{% block title %}Students Currently Out{% endblock %}

{% block content %}
    <!-- Main Content -->
    <h1 class="text-3xl font-bold text-surface-800 dark:text-surface-100 mb-8 mt-8">Students Currently Marked Out</h1>

    {% if out_students %}
    <div class="overflow-x-auto shadow-soft dark:shadow-soft-dark rounded-xl mb-8">
        <table class="min-w-full bg-white dark:bg-surface-800">
            <thead class="bg-surface-100 dark:bg-surface-700">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-surface-700 dark:text-surface-300 uppercase tracking-wider">Student ID</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-surface-700 dark:text-surface-300 uppercase tracking-wider">Name</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-surface-700 dark:text-surface-300 uppercase tracking-wider">Marked Out At</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-surface-200 dark:divide-surface-700">
                {% for student_id, student_info in out_students.items() %}
                <tr class="  transition-colors">
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-surface-700 dark:text-surface-300">{{ student_info['rollNumber'] }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-surface-700 dark:text-surface-300">{{ student_info['name'] }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-surface-700 dark:text-surface-300">
                        {%- set t = student_info['time_out'] -%}
                        {{ t[11:16] if t and t|length >= 16 else t }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="card p-6 text-center mb-8">
        <p class="text-surface-600 dark:text-surface-300">No students are currently marked out.</p>
    </div>
    {% endif %}

    <a href="{{ url_for('home') }}" class="btn-primary inline-flex items-center px-4 py-2">
        Back to Home
    </a>

<style>
    @keyframes marquee {
        0% { transform: translateX(100%); }
        100% { transform: translateX(-100%); }
    }
    .animate-marquee {
        display: inline-block;
        animation: marquee 15s linear infinite;
    }
</style>
{% endblock %}